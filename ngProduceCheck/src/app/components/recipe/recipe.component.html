
<div class="container" *ngIf="recipe">
  <h1>{{recipe.name}}</h1>
  <p>{{recipe.description}}</p>
  <h6>Recipe by <a [routerLink]="['/profile/', recipe.user.id]">{{recipe!.user.username}}</a> | published on {{recipe.creationDate | date: "MMMM dd, yyyy"}}</h6>
  <button class="btn btn-primary">Save Recipe</button>
  <img src="{{recipe.imgUrl}}" alt="No image found">

  <div class="card" style="width: 30rem;">
    <div class="card-body">
      <div class="row align-items-center">
        <div class="col">
          <p> <strong> Prep Time:</strong></p>
          {{recipe.prepTime}}
        </div>
        <div class="col">
          <p> <strong> Cook Time:</strong></p>
          {{recipe.cookTime}}
        </div>
        <div class="col">
          <p> <strong> Total Time:</strong></p>
          {{recipe.prepTime + recipe.cookTime}}
        </div>
      </div>
    </div>
  </div>

  <h1>Ingredients <button *ngIf="userCanEdit" class="btn btn-primary btn-sm" [routerLink]="['/ingredient', recipe.id]">
    Edit Ingredients
  </button></h1>
  <ul *ngFor="let recIng of recipe?.recipeIngredients">
    <li>{{recIng.measurement}}  {{recIng.ingredient.name}}</li>
  </ul>

  <h1>Directions</h1>
  <p>{{recipe.instructions}}</p>


  <!-- <table id="recipe-table" class="table table-bordered">
    <tr><th>{{recipe!.name}} submitted by <a [routerLink]="['/profile/', recipe?.user?.id]">{{recipe!.user.username}}</a></th></tr>
    <tr><td>Preparation Time: {{recipe!.prepTime}} minutes</td></tr>
    <tr><td>Cook Time: {{recipe!.cookTime}} minutes</td></tr>

    <tr><th>Description</th></tr>
    <tr><td>{{recipe!.description}}</td></tr>

    <tr><th>Directions</th></tr>
    <tr><td>{{recipe!.instructions}}</td></tr>

    <tr><th>Ingredients</th></tr>
    <tr *ngFor="let recIng of recipe?.recipeIngredients"><td>{{recIng.ingredient.name}}</td></tr> -->

  <!-- </table> -->

    <div name="noComments" *ngIf="noCommentsYet">
        <h2>No comments for the recipe yet, be the first!</h2>
    </div>

   <h1>Comments ({{recipeComments.length}})</h1>
   <hr>
   <div *ngFor="let comment of recipeComments">
     <button *ngIf="checkUser(comment.user.id, currentUser.id)" type="button" class="btn btn-danger btn-sm" style="float:right;" (click)="removeComment(comment.id)">Delete</button>
    <h4> <strong>{{comment.user.username}}</strong> <h6>  {{comment.commentDate | date: "MM/dd/yyyy h:mm a"}}</h6></h4>
    <p>{{comment.comment}}</p>
    <hr>
   </div>
  <!-- <div name="comment-table"> Comments
    <table class="table-bordered" *ngFor="let comment of recipeComments">
      <tr>
        <td style="color: gray">
            {{comment.user.username}} @ {{comment.commentDate | date:'shortTime' }}
        </td>
        <td>
            {{comment.comment}}
        </td>
      </tr>
       <tr *ngIf="comment.comments.length > 0"></tr>
       <td>
        <button *ngIf="checkUser(comment.user.id, currentUser.id)" class="btn btn-danger" (click)="removeComment(comment.id)">Delete</button>
        <input type="text" [(ngModel)]="newComment.comment">
        <button *ngIf="!checkUser(comment.user.id, currentUser.id)" class="btn btn-dark" (click)="replyComment(comment.id,newComment)">Reply</button></td>
        <td *ngIf="comment.replyComment"><em>{{comment.replyComment}}</em></td>
    </table><br> -->
    <!-- <input type="text" [(ngModel)]="newComment.comment">
        <button (click)="addNewComment(newComment)">Comment On This Recipe</button> -->

        <div class="input-group mb-3">
          <input type="text" class="form-control" placeholder="Comment on {{recipe.user.username}} Recipe!" aria-label="Users Comment" aria-describedby="button-addon2" [(ngModel)]="newComment.comment">
          <button class="btn btn-outline-secondary" type="button" id="button-addon2" (click)="addNewComment(newComment)">Add Comment</button>
        </div>
  </div>
<!-- </div> -->

<!-- <div name="notLoggedIn" *ngIf="!checkLogin()">
You must be logged in to utilize this feature.
<br>
<button [routerLink]="['/login']">Log in</button> <button [routerLink]="['/register']">Register</button>
</div>



<div name="maintable" *ngIf="!selected && checkLogin()">
  <form>
    <div class="container-fluid text-center">
      <div class="card w-50">
        <div class="card-body">
          <h5 class="card-title">Recipe Search</h5>
          <input
            class="form-control"
            type="text"
            name="search"
            placeholder="Search a Recipe By Key Word"
            [(ngModel)]="searchWord"
          />

          <div class="text-center">
            <button class="btn btn-primary" (click)="searchForRecipe(searchWord)">
              Search
            </button>
          </div>
        </div>
      </div>
    </div>
  </form>


<div name="noSearchResult" *ngIf="nothingFound">
  <h1>No recipes found, sorry!</h1>
</div>

    <div name="searchTable" *ngIf="searchClicked && !nothingFound">
    <table class="table">
        <thead class="thead-dark">
            <tr>
              <th scope="col">Recipe Name</th>
              <th scope="col">User</th>
              <th scope="col">Prep Time</th>
              <th scope="col">Cook Time</th>
            </tr>
        </thead>
        <tbody *ngFor="let r of recipes" >
            <tr (click)="chooseRecipe(r)">
              <td>{{r.name}}</td>
              <td>{{r.user.username}}</td>
              <td>{{r.prepTime}}</td>
              <td>{{r.cookTime}}</td>
            </tr>
        </tbody>
    </table>
    </div>
</div>
<div name="selectedtable" *ngIf="selected" style="height:fit-content">
  <img src="{{selectedRecipe?.imgUrl}}" alt="No image found">
  <table id="recipe-table" class="table table-bordered">
    <tr><th>{{selectedRecipe!.name}} submitted by {{selectedRecipe!.user.username}}</th></tr>
    <tr><td>Preparation Time: {{selectedRecipe!.prepTime}} minutes</td></tr>
    <tr><td>Cook Time: {{selectedRecipe!.cookTime}} minutes</td></tr>

    <tr><th>Description</th></tr>
    <tr><td>{{selectedRecipe!.description}}</td></tr>

    <tr><th>Directions</th></tr>
    <tr><td>{{selectedRecipe!.instructions}}</td></tr>

    <tr><th>Ingredients</th></tr>
    <tr><td>{{selectedRecipe!.recipeIngredients}}</td></tr>
  <button (click)="selected=false">Back</button><button>Like</button>
  </table>
  Comments
  <table class="table-bordered">
    <tr *ngFor="let comment of recipeComments">
      <td style="color: gray">{{comment.user.username}} @ {{comment.commentDate | date:'shortTime' }}</td>
     <td>{{comment.comment}}</td>
     <td><button *ngIf="checkUser(comment.user.id, currentUser.id)" class="btn btn-danger" (click)="removeComment(comment.id)">Delete</button>
      <td><button *ngIf="!checkUser(comment.user.id, currentUser.id)" class="btn btn-dark">Reply</button>

    </td>
    </tr>
  </table>
  <input type="text" [(ngModel)]="newComment.comment">
  <button (click)="addNewComment(newComment)">Add Comment</button>
</div>

<div name="replyCommentDiv" *ngIf="replyToComment">
<input type="text" [(ngModel)]=""

</div>


-->
